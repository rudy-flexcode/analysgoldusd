<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suivi des ETF et Analyse RSI/SMA</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
        }
        header {
            width: 100%;
            background-color: #333;
            color: white;
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
        }
        header h1 {
            margin: 0;
        }
        .subtitle {
            font-style: italic;
            margin-top: 5px;
            color: #ccc;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-bottom: 20px;
            width: 100%;
            max-width: 1200px;
        }
        .card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 300px;
            text-align: center;
        }
        .btn {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 20px 0;
        }
        .btn:hover {
            background-color: #45a049;
        }
        #loading {
            margin-top: 10px;
            font-style: italic;
            color: #888;
        }
        footer {
            width: 100%;
            background-color: #333;
            color: white;
            text-align: center;
            padding: 15px 0;
            margin-top: auto;
            font-size: 0.9em;
        }
        .legal {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
            text-align: justify;
        }
        .legal a {
            color: #4CAF50;
            text-decoration: none;
        }
        .legal a:hover {
            text-decoration: underline;
        }
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                align-items: center;
            }
            .card {
                width: 90%;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>ETF Tracker Pro</h1>
        <div class="subtitle">Suivez et analysez les ETF en temps réel</div>
    </header>

    <div class="container">
        <!-- Carte 1 -->
        <div class="card">
            <h2>Suivi des ETF Gold et USD</h2>
            <p>Prix de l'ETF Gold : $<span id="gold_price"></span></p>
            <p>Prix de l'ETF USD : $<span id="usd_price"></span></p>
            <p><strong>Signal :</strong> <span id="signal"></span></p>
        </div>
        
        <!-- Carte 2 -->
        <div class="card">
            <h2>Analyse RSI</h2>
            <p>Valeur RSI : <span id="rsi"></span></p>
            <p><strong>Signal RSI :</strong> <span id="rsi_signal"></span></p>
        </div>
        
        <!-- Carte 3 -->
        <div class="card">
            <h2>Moyenne Mobile (SMA)</h2>
            <p>Valeur SMA : <span id="sma"></span></p>
            <p><strong>Signal SMA :</strong> <span id="sma_signal"></span></p>
        </div>
    </div>
    
    <button class="btn" onclick="refreshData()">Rafraîchir les données</button>
    <div id="loading"></div>
    
    <footer>
        <div class="legal">
            <p><strong>Mentions légales</strong></p>
            <p>ETF Tracker Pro est un outil d'information financière fourni à titre indicatif uniquement. Les données fournies proviennent de l'API Twelve Data et sont actualisées à intervalle régulier.</p>
            <p>Les signaux d'achat et de vente générés par cet outil ne constituent en aucun cas des conseils d'investissement. Toute décision d'investissement prise sur la base de ces informations relève de la responsabilité exclusive de l'utilisateur.</p>
            <p>© 2025 ETF Tracker Pro. Tous droits réservés.</p>
            <p>Contact : <a href="rudydev974@gmail.com">rudydev974@gmail.com</a></p>
        </div>
    </footer>

    <script>
        async function refreshData() {
            document.getElementById('loading').innerText = "Chargement des données...";
            try {
                const response = await fetch('/refresh');
                if (!response.ok) {
                    throw new Error('Erreur réseau');
                }
                const data = await response.json();
                
                document.getElementById('gold_price').innerText = data.gold_price?.toFixed(2) || "N/A";
                document.getElementById('usd_price').innerText = data.usd_price?.toFixed(2) || "N/A";
                document.getElementById('signal').innerText = data.signal || "N/A";
                document.getElementById('rsi').innerText = data.rsi?.toFixed(2) || "N/A";
                document.getElementById('rsi_signal').innerText = data.rsi_signal || "N/A";
                document.getElementById('sma').innerText = data.sma?.toFixed(2) || "N/A";
                document.getElementById('sma_signal').innerText = data.sma_signal || "N/A";
            } catch (error) {
                console.error('Erreur:', error);
                document.getElementById('loading').innerText = "Erreur lors du chargement des données.";
            } finally {
                setTimeout(() => {
                    document.getElementById('loading').innerText = "";
                }, 2000);
            }
        }
        
        // Auto-refresh au chargement
        document.addEventListener('DOMContentLoaded', () => {
            refreshData();
            // Rafraîchir automatiquement toutes les 5 minutes
            setInterval(refreshData, 300000);
        });
    </script>
</body>
</html>